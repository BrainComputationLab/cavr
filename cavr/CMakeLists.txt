PROJECT(cavr)

FIND_PACKAGE(Protobuf REQUIRED)

INCLUDE_DIRECTORIES("include" "${CMAKE_CURRENT_BINARY_DIR}")

SET(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${CMAKE_CURRENT_BINARY_DIR}")
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${CXX11_FLAGS}")

SET(cavr_sources
    "source/math/vector.cpp"
)

ADD_LIBRARY(cavr SHARED ${cavr_sources})
TARGET_LINK_LIBRARIES(cavr ${PROTOBUF_LIBRARIES})
SET_TARGET_PROPERTIES(cavr PROPERTIES LINKER_LANGUAGE CXX)

INSTALL(DIRECTORY include/cavr
        DESTINATION include
        FILES_MATCHING PATTERN "*.h")

IF(UNIX)
#	TARGET_LINK_LIBRARIES(cavr_spec pthread dl)
#	TARGET_LINK_LIBRARIES(cavr_sim pthread dl ${ADDITIONAL_LIBS})
#	INSTALL(TARGETS cavr_spec cavr_sim LIBRARY DESTINATION lib)
ENDIF(UNIX)
